# ============================================================
# ðŸ§© HomeMediaForge - dnsmasq auto-generated hosts (RuntimeContainer)
# ============================================================
{{ $netName := or (env "HOMEMEDIAFORGE_NET_NAME") "homemediaforge_net" }}
{{ $hostSegment := or (env "HMF_HOST_SEGMENT") "homemediaforge" }}
{{ $localDomain := or (env "HMF_LOCAL_DOMAIN") "local" }}
{{ range $container := . }}
  {{ if $container.State.Running }}
    {{ $name := trimPrefix "/" $container.Name }}
    {{ $network := index $container.Networks $netName }}
    {{ $ip := or (and $network $network.IPAddress) (and $network $network.IP) $container.IP }}
    {{ if $ip }}
address=/{{ $name }}.{{ $hostSegment }}.{{ $localDomain }}/{{ $ip }}
address=/{{ $name }}.local/{{ $ip }}
    {{ end }}
  {{ end }}
{{ end }}
