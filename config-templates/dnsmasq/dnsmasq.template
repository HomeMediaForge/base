# ============================================================
# HomeMediaForge - dnsmasq auto-generated hosts (RuntimeContainer)
# ============================================================
{{ $localDomain := or (env "HMF_LOCAL_DOMAIN") "media.local" }}
{{ $hostSegment := or (env "HMF_HOST_SEGMENT") "" }}
{{ range $container := . }}
{{- if $container.State.Running }}
{{- $name := trimPrefix "/" $container.Name }}
{{- range $netName, $network := $container.Networks }}
{{- if $network.IP }}
address=/{{ $name }}.local/{{ $network.IP }}
{{- if ne $localDomain "local" }}
address=/{{ $name }}.{{ $localDomain }}/{{ $network.IP }}
{{- end }}
{{- if $hostSegment }}
address=/{{ $name }}.{{ $hostSegment }}.{{ $localDomain }}/{{ $network.IP }}
{{- end }}
{{- end }}
{{- if $network.GlobalIPv6Address }}
address=/{{ $name }}.local/{{ $network.GlobalIPv6Address }}
{{- if ne $localDomain "local" }}
address=/{{ $name }}.{{ $localDomain }}/{{ $network.GlobalIPv6Address }}
{{- end }}
{{- if $hostSegment }}
address=/{{ $name }}.{{ $hostSegment }}.{{ $localDomain }}/{{ $network.GlobalIPv6Address }}
{{- end }}
{{- end }}
{{- end }}
{{- end }}
{{ end }}
